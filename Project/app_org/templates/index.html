{% extends 'base.html' %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}" />
{% endblock %}

{% block content %}
  {% include 'navbar.html' %}

  {% for message in get_flashed_messages() %}
    <div class="alert alert-success" role="alert">{{ message }}</div>
  {% endfor %}

  <header>
    <h1>DETI MERCH</h1>
  </header>

  <div class="page-container" style="display: flex; justify-content: flex-start; margin-left: 0; padding: 0 20px; width: 100%;">
    <div class="filters-column" style="margin: 0; margin-right: 10px;">
      {% set filter_action='main.index' %}
      {% include '_filters.html' %}
    </div>  

    <div class="products-center" style="margin: 0 auto; max-width: 1200px;">
      <div class="row product-container">
        {% for product in products %}
          <div class="product col-md-12">
            <img
              class="card-img-top"
              src="{{ url_for('static', filename='assets/' + product.image) }}"
              alt="{{ product.name }}"
            />
            <h2 class="card-title">{{ product.name }}</h2>
            <p>{{ product.description }}</p>
            <p class="card-price">{{ product.price | int }}€</p>
            <form action="/product/{{ product.id }}" method="GET">
              <button class="view-product">View Product</button>
            </form>
            <form action="/cart/add/{{ product.id }}" method="POST">
              <button class="add-to-cart">
                <i class="bx bx-cart-add"></i>Add to Cart
              </button>
            </form>
            <form action="/favorites/add/{{ product.id }}" method="POST">
              <button class="add-to-favorites">★</button>
            </form>
          </div>
          {% if loop.index % 3 == 0 and not loop.last %}
            </div>
            <div class="row product-container">
          {% endif %}
        {% endfor %}
      </div>
    </div>
  </div>
{% endblock %}