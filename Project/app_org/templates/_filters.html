<form method="GET" action="{{ url_for(filter_action) }}" class="filter-form">
    <h3>Filtrar Produtos</h3>
    
    <div class="filter-section">
        <h4>Estoque</h4>
        <div class="filter-option">
            <input type="radio" id="stock_in" name="stock" value="in" {% if request.args.get('stock') == 'in' %}checked{% endif %}>
            <label for="stock_in">Em estoque</label>
        </div>
        <div class="filter-option">
            <input type="radio" id="stock_out" name="stock" value="out" {% if request.args.get('stock') == 'out' %}checked{% endif %}>
            <label for="stock_out">Fora de estoque</label>
        </div>
        <div class="filter-option">
            <input type="radio" id="stock_all" name="stock" value="" {% if not request.args.get('stock') %}checked{% endif %}>
            <label for="stock_all">Todos</label>
        </div>
    </div>

    <div class="filter-section">
        <h4>Preço</h4>
        <div class="price-inputs">
            <input type="number" name="price_min" value="{{ request.args.get('price_min', '') }}" placeholder="Mínimo" min="0">
            <input type="number" name="price_max" value="{{ request.args.get('price_max', '') }}" placeholder="Máximo" min="0">
        </div>
    </div>

    <div class="filter-section">
        <h4>Categorias</h4>
        {% for category in categories %}
        <div class="filter-option">
            <input type="checkbox" id="cat{{ category.id }}" name="categories" value="{{ category.id }}"
                   {% if category.id|string in request.args.getlist('categories') %}checked{% endif %}>
            <label for="cat{{ category.id }}">{{ category.name }}</label>
        </div>
        {% endfor %}
    </div>

    <div class="filter-section">
        <h4>Cursos</h4>
        {% for course in courses %}
        <div class="filter-option">
            <input type="checkbox" id="course{{ course.id }}" name="courses" value="{{ course.id }}"
                   {% if course.id|string in request.args.getlist('courses') %}checked{% endif %}>
            <label for="course{{ course.id }}">{{ course.name }}</label>
        </div>
        {% endfor %}
    </div>

    <div class="filter-section">
        <h4>Tamanhos</h4>
        {% for size in sizes %}
        <div class="filter-option">
            <input type="checkbox" id="size{{ loop.index }}" name="sizes" value="{{ size }}"
                   {% if size in request.args.getlist('sizes') %}checked{% endif %}>
            <label for="size{{ loop.index }}">{{ size }}</label>
        </div>
        {% endfor %}
    </div>

    <div class="filter-section">
        <h4>Cores</h4>
        {% for color in colors %}
        <div class="filter-option">
            <input type="checkbox" id="color{{ loop.index }}" name="colors" value="{{ color }}"
                   {% if color in request.args.getlist('colors') %}checked{% endif %}>
            <label for="color{{ loop.index }}">{{ color }}</label>
        </div>
        {% endfor %}
    </div>

    <button type="submit" class="apply-filters">Aplicar Filtros</button>
</form>